id: custom_data_import
label: Import Data from JSON
source:
  plugin: url
  data_fetcher_plugin: file
  data_parser_plugin: json
  urls: modules/custom/custom_migration/data/recipes.json
  item_selector: /
  fields:
    -
      name: _id
      label: '_id'
      selector: _id
    -
      name: recipe_title
      label: 'Recipe Title'
      selector: title
    -
      name: category
      label: 'Category'
      selector: category  
    -
      name: area
      label: 'Area'
      selector: area  
    -
      name: instructions
      label: 'Instructions'
      selector: instructions  
    -
      name: description
      label: 'Description'
      selector: description  
    -
      name: thumb
      label: 'Thumb'
      selector: thumb  
    -
      name: preview
      label: 'Preview'
      selector: preview  
    -
      name: time
      label: 'Time'
      selector: time  
    -
      name: popularity
      label: 'Popularity'
      selector: popularity  
    -
      name: favorites
      label: 'Favorites'
      selector: favorites 
      multi: true 
    -
      name: likes
      label: 'Likes'
      selector: likes 
      multi: true  
    -
      name: youtube
      label: 'Youtube'
      selector: youtube  
    -
      name: tags
      label: 'Tags'
      selector: tags 
      multi: true 
    -
      name: createdAt
      label: 'CreatedAt'
      selector: createdAt  
    -
      name: updatedAt
      label: 'UpdatedAt'
      selector: updatedAt  
    -
      name: ingredients
      label: 'Ingredients'
      selector: ingredients 
      multi: true 

destination:
  plugin: entity:node
  default_bundle: recipe
  overwrite_properties:
    - nid
process:
  title: recipe_title
  type:
    plugin: default_value
    default_value: recipe
  field_category: category
    plugin: extract
    source: category
  field_area: area
    plugin: extract
    source: area
  field_instructions: instructions
    plugin: extract
    source: instructions
  field_description: description
    plugin: extract
    source: description
  field_thumb: thumb
    plugin: extract
    source: thumb
  field_preview: preview
    plugin: extract
    source: preview
  field_time: time
    plugin: extract
    source: time
  field_popularity: popularity
    plugin: extract
    source: popularity
  field_favorites: favorites
    plugin: extract
    source: favorites
  field_likes: likes
    plugin: extract
    source: likes
  field_youtube: youtube
    plugin: extract
    source: youtube
  field_tags: tags
    plugin: extract
    source: tags
  field_createdAt:
    plugin: format_date
    source: createdAt
    from_format: 'U'  # Формат Unix Timestamp
    to_format: 'Y-m-d H:i:s'  # Формат, в який потрібно конвертувати
  field_updatedAt:
    plugin: format_date
    source: updatedAt
    from_format: 'U'  # Формат Unix Timestamp
    to_format: 'Y-m-d H:i:s'  # Формат, в який потрібно конвертувати
  field_ingredients: ingredients
    plugin: extract
    source: ingredients

migration_dependencies: {}
